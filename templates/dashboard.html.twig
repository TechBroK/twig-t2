{% extends 'base.html.twig' %}

{% block title %}Dashboard â€” TicketFlow{% endblock %}

{% block content %}
  <main class="container dashboard-container">
    <h1 class="page-heading">Dashboard</h1>
    
    <div class="stats">
      <div class="card stat-card">
        <h3>Total</h3>
        <p class="big" id="total-count">0</p>
      </div>
      <div class="card stat-card">
        <h3>Open</h3>
        <p class="big" id="open-count">0</p>
      </div>
      <div class="card stat-card">
        <h3>In Progress</h3>
        <p class="big" id="inprogress-count">0</p>
      </div>
      <div class="card stat-card">
        <h3>Resolved</h3>
        <p class="big" id="resolved-count">0</p>
      </div>
    </div>

    <section class="tickets-section">
      <h2>Tickets</h2>
      
      {# Ticket Form Component #}
      <div class="ticket-form-wrapper">
        <form id="ticket-form" class="ticket-form-card">
          <div class="form-row">
            <div class="form-group">
              <label for="ticket-title">Title <span class="required">*</span></label>
              <input 
                type="text" 
                id="ticket-title" 
                name="title" 
                class="form-input" 
                placeholder="Enter ticket title"
                required
              >
              <span class="field-error" data-for="ticket-title"></span>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="ticket-description">Description</label>
              <textarea 
                id="ticket-description" 
                name="description" 
                class="form-input" 
                rows="4"
                placeholder="Describe the ticket..."
              ></textarea>
            </div>
          </div>
          
          <div class="form-row form-row-inline">
            <div class="form-group">
              <label for="ticket-priority">Priority</label>
              <select id="ticket-priority" name="priority" class="form-input">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="ticket-status">Status <span class="required">*</span></label>
              <select id="ticket-status" name="status" class="form-input" required>
                <option value="">Select status</option>
                <option value="open" selected>Open</option>
                <option value="in_progress">In Progress</option>
                <option value="closed">Resolved</option>
              </select>
              <span class="field-error" data-for="ticket-status"></span>
            </div>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn primary">Save</button>
            <button type="reset" class="btn outline">Cancel</button>
          </div>
        </form>
      </div>

      {# Search and Filter Section #}
      <div class="ticket-controls">
        <div class="search-box">
          <input 
            type="text" 
            id="ticket-search" 
            class="form-input search-input" 
            placeholder="Search tickets..."
          >
        </div>
        <div class="filter-box">
          <select id="status-filter" class="form-input filter-select">
            <option value="">All statuses</option>
            <option value="open">Open</option>
            <option value="in_progress">In Progress</option>
            <option value="closed">Resolved</option>
          </select>
        </div>
      </div>

      {# Ticket Table Component #}
      <div class="ticket-table-wrapper">
        <table class="ticket-table" id="ticket-table">
          <thead>
            <tr>
              <th class="col-title">Title</th>
              <th class="col-priority">Priority</th>
              <th class="col-status">Status</th>
              <th class="col-actions">Actions</th>
            </tr>
          </thead>
          <tbody id="ticket-table-body">
            <tr class="empty-row">
              <td colspan="4" class="empty-state">No tickets yet. Create one above to get started.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>
{% endblock %}
